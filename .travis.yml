language: objective-c
osx_image: xcode10.2
branches:
  only:
  - master
  - beta
before_cache:
  - brew cleanup
before_install:
  - echo -e "machine github.com\n  login $CI_USER_TOKEN" >> ~/.netrc
  - fastlane run setup_travis
  - gem update --system
  - gem install bundler
install:
  - bundle install
  - brew update
  - brew install --HEAD usbmuxd
  - brew install --HEAD libimobiledevice
  - brew install ideviceinstaller
  - brew install ios-deploy
  - git clone https://github.com/flutter/flutter.git -b stable --depth 1
before_script:
  - flutter doctor
script:
  - flutter build ios --release --no-codesign
  - bundle exec fastlane ios deploy
cache:
  directories:
    - $HOME/Library/Caches/Homebrew
env:
  global:
  - PATH=${TRAVIS_BUILD_DIR}/flutter/bin:${PATH}
  - secure: rsF1K/G6NgJ2ruT+cu58sgLblDB5k+v09HY/qhLKsWCM5I26iTZNdUnHpWEABYRZzpuJq2QKLH62FxHHrNOJSvl//RYhqseV9EPnKp+lqp74Ly/nFmut3sbwz3Qc7ckqvIe04TZ+EwXjgtX4EaEp2acJTV6vkEaSaSyt3kxSuyQrg764ZxRPe1vQoGj3mt/qbsA1AuumiHvFhBl8JqAwPOX+eoZDFyJuJAKO3F2+lllW4mbac408qvZU/IyvHhGb6hmsyhZgWgzUSbEMi3e6NLrBa4mMdq3o8lh1DVStNT0QdK9w208KUsnDtMmJnmf7t4dj2m32c/zyMBYffsATfvphvWlsqapKja2ortXP3JiphUycyYu4855DAuFvdhtY0nUDelnp12g1J1gSB7VnpX6Sqk0LwgAwc8ccr0fgQHHfI7xwwYAIpDBOELfK9uBHeSjB5os5eKzXz08a18BAVNvEMykfUybJ/UvYK4UEpgKGRDav5qT26yfKAMgD84ESjZlrPenz53PTLWhwTK9WjcdklyL4N+WQZHrk1WBgmoijfCrVTbx08WYMB98srcA6+iPFJso1PB+jxJP+obVryoWtmgTT9AhNZfW2dkw6HLrYrlOXfvLUdgYx289OSZ25HN/hyjTwmJSVOlkSy/ivcZjLQNDJ9v6iipn0+gOXX+E=
  - secure: QRylzyyat8CUKkUo8QwXTBQGCmMzBooLLD+o2o3UW8ic4nc5PAlexPlRPEkneXzLJ5LU+uPtAXMRgl9z3JhJHTO8P7ACbiplMhlS8y6zvrAbKnhq/YHtLBAsGbqTg2zOxBtcEiMwSiJLg27zA8iefenZ1dMSGFE7Jn7jH90RhkQRH/1sCSO9Y15S/n2OPAmTPS7ERlx3C7kGh+t7TzKp3YEaNIAf1iga5sdV/0ZZ2TDnpCpQLIdihjrf0oy6rQe5U4/1zDn//NrHBOh1aCc/QltcLsVszFyjcXdGOc5+rqz9gfLg3Vp874xjSpwvWNKr9BF3h/5NTr4+v+o0iQiDYH6zQADejNkhUU/+4batQka8P4X25yWpSsrWVYYVRajyrQ1ti2k1aVXk0zKKUGkg2xmwxubVeLxSEelFk7XyN++rHn83JL6skTgNGZcNhYvirXg9pYt9cPpByyH+m/W3+i2BII70/vHfrDbNfd/LZ/YC5dlT3bYt9GqM5pckPYKl6yyUXPULUj8vE4KuDo7zEB4UbspoXD9wb7mgwweE94ezqzouf2YZSxW5X9tHP66lIss8J2rz6h323+lfaFwNIT1J7RwFzYXnIz6dOjSx7EVPJqLHEa0PtNfg0KW6ArP0gBWUjYuRTnEQH+MJy7F0MhPxrVHVVmmzSb4SjuMWlLg=
  - secure: XsTyq7glnr7YA1TQdAPskSewsrGm0h62OISz1TvUtTK5gdJs3MD6cnHSbW3/21BiUFNW99ptdL0r9F8KVVDNSHM6bKhefIdcNJcNC/mcaPA01/yMsntJ+TB5EUWU+aepmO38xKyxESnm1LrIToqQGYs1jSr0jxxxCkKdqha9U6M12wZzSZUwNoFdreADffCmIusa4XseNljH2dMssOlwiN0oBVwk/GNpLN1Ji/gqlYCOcsw+eY9gaEmTR0cboIaWiZEyPjEDq8Z+uNhv798RFKWCZtMxbQb+mgW7wq98zO9zqCzODldlxTvaHGd+EqnHre4Q1q0xbocKKPfNoHDYeOAxppCEyuS3GaisPsU4WhDoIygE9IYbbcpGaBfO8aydhJV+FG1Wq6QA45bCEosO0ZOXDyITdU/NTcnpqJTJiTSsG9YZcqygUkPcqFanbgFNp+DwaJAWU+6f+KNKzlwEMXFVjtPbiVaYLI5AL8RYE89fAom6qKHwlNgU0Iz7v6JbZ0JYsp/X1/5VIDV97du4wmdGf1TFKvBXJJUJLc6zNE7Qxw5oqKqlXfGdbDDXAVjYnkaJBcn2POZCB3QCXfxdUrKBFxZTM23meD0I4rQG+V1b+bWndW652wdGZConjmtCe7fhMFaF/KBEtO5ot82iu2YdYxudT/7QLispDcDbK7Y=
  - secure: qK9n8b5m9S1Z2u/lQ0HziTO01xbRGM+0PsbSyPhVjuIz3ny6oZThRAzC8SJJYVvEUnJsABjsn3s72nqLRwGJIiutj8LSAA2BsiRheKxb4PshHqmph2VIuS6gqGecELAvABj74iXpwq1PE49x8h4d86oUkGy2wfpAoRoSJiNiXpka+Lf0U1EF7OxZulgpxnB8q3ZAKFsQpk5G3Vc6+PtDtV/9xN+00QWXU86aTtBcrV/FrPRKKlnlz1Qp82/q2UzMztmB9s+Ie2psYS3xhHt09SZEibKfQ5hfs/jgxmuR63H9zPmyBd0anEDsiupdJ99PRNPCPOvjVd8hHM3L7ELg6gtz0VTdg3xluq+pEdiTr7tYVO03x5sfusd41UvpV/jAMmGymHHrf140U+NfYUu5sa1PKJmdsLfwgOdGwXoUc/2BUmhUUBjNYscdKRxEaXP9JVd2CuXePfcXRUL8j93h8G8aIkc+N+MH5Pockun6lCBax90/nBNY8HBx6JBQjcr4m6AmUf80X/6/qWz6G+kqJPgVQEUNlO6NEQzs5EWVJgdu05Mr23xhkIR6lMTV0E210+/pHKyAKtHHPc8UmvH2MydKm7pWryh7S/lBSoDdSHFWZHnKYKt4n6zpXT33wV8k6j0Sxiwmj+IgqnNNhW8oKVKdsWzr+sXiwjhfUgivtEM=
  - secure: VyaiP/84G4OoWsOx8qZFXzxiM0S628URolqA2j3ojpsoXkGzWPTEY5McolNwmgjL5yIEBaN8or9rENmfJaAY5TgvoNo5yz1E/S+L7Xz0Cym05vXSVZtvzjEwJdr1AqA18zv6SDgv7lvlJmt45mCz0xdQhoip1Yqs+xTAvJB7b8luwkddgAg998saIyUQYjLg3nvUPeIngsOH8xWWEz/RcMvENchUDnKhqkELY6WYs2IqTCLc9bS3Hjg5VszWwk+46G2/Aoq9dNX3qXUolq8pb6j/OHzdHqMniXpdwAKzc1FJtrXqwY55KX0IJWr1POlvlVI9jyThzP41aOT03wYxmi3f5DyL/4cRurL9UWmctDWgts3MKkFNqBzoKkuDGXVaZRyn37hMSVwX0PLe0+GwLgppnO3mkxmE8g9/3CLsIQlqmItseQyG2jTMu8Abaz67YJ5TNg9qg/pHsm4vVTY/cKOMZ+hT9llRZhKZI20o5K/lsQxBTzOF3X983EIFuejUZ5jYgN+pSRmk0TZw97xXcvGsNGogpfItTnRWoSwNJvNkiWZ4Rx3ysx4JIYRmhtK0/T5K6+ocmUUCKyRN0oHkNsn9x0COrLGyagJjvGOKWa+41MTlHpJAYR3KDf0nN8AyRzE8vNdClGldkoatMeEPXo+JC0f4GihjofEWWOQ4sM4=
  - secure: UgelfxpFouNbwSdE5eC95SHAGOfAy5RvxO9WuJILD7YLBRbMsLIOCvqOzHw3R4SL7ii/9RJ4WCYEvFIxh46KCHinOwxm0JvXbVRM/3sVCbBtqopTfZkqhRKyik/HorxDoevv2h6inhbE2LhRa5VLpA/KDL/ErAoDicKWl0Rxg5B8+7FD+XEA1Tdx6bayJH+G1q8w+hE8G/8q3/twC+rII3iYjFUdopg3grD6kPVSqGeo0TZokLZorF/n5Xq5hB/UOz3LJsKWmzwjS5YmLGxqYj4jzIR73p9LmBtdV3RcoAUeszPwm56V/1duEx8ZJEsmZUQvQ0dq+U/A8S1MTMO3OPqFBjaMiTQzMbW2SMMJae8i7UKUwNwldF1BRWLUrGF7jYiwRDhqeExWHh2it63t3JJ8aY+ekzatm5O+y9n076wfJ8/lnpLYAT1rTH2nVcjgBxT8a2gAH3JRkwkH+wcEszz4yyl4kCEkhR8YkN22g07YFp/fNbSAYur0hIXYlxpBr+i4MQrEYvC9hR5zxJEw65Bn0bYmN9Qqae466qkB4xaGoLqc8+84KiyBUdkNnjVXtJ+AuI27twNkKGoW4cnd5SLlWBssEyYs5jqsMLrgY8I4Z7PWM0qbqFJYmKDPWevFGAj4Nn+oo7hPWAkrWixWI6KniTsERpfV7Qq2ynJ0W6o=
